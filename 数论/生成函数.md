# 生成函数

## 普通生成函数(适用于限制元素取法的计数)

### 形如$f(x)=\sum_{i=0}^{∞,n}a_ix^i$，根据次数代表出现次数，将所有条件化为生成函数，累乘，得到结果的生成函数，再通过$\frac{1}{(1-x)^n}=\sum ^{∞}_{i=0}C_{n+i-1}^{n-1}x^i$转换，取$x^i$的系数就是取$i$个元素的所有取法

### 例题：食物

* 在许多不同种类的食物中选出n个，每种食物的限制如下：

* 承德汉堡：偶数个

* 可乐：0 个或 1 个

* 鸡腿：0 个，1 个或 2 个

* 蜜桃多：奇数个

* 鸡块：4 的倍数个

* 包子：0 个，1 个，2 个或 3 个

* 土豆片炒肉：不超过一个。

* 面包：3 的倍数个

* 每种食物都是以「个」为单位，只要总数加起来是n就算一种方案。对于给出的n你需要计算出方案数，对10007取模。

#### 得出每个食物的生成函数分别为

* $1+x^2+x^4+...=\frac{1}{1-x^2}$
* $1+x=\frac{1-x^2}{1-x}$
* $1+x+x^2=\frac{1-x^3}{1-x}$
* $x+x^3+x^5+...=\frac{x}{1-x^2}$
* $1+x^4+x^8+...=\frac{1}{1-x^4}$
* $1+x+x^2+x^3=\frac{1-x^4}{1-x}$
* $1+x=\frac{1-x^2}{1-x}$
* $1+x^3+x^6+...=\frac{1}{1-x^3}$

#### 累乘可得

* $f(x)=\frac{x}{(1-x)^4}$

#### 再根据$\frac{1}{(1-x)^n}=\sum ^{∞}_{i=0}C_{n+i-1}^{n-1}x^i$可得

* $f(x)=\frac{x}{(1-x)^4}=\sum_{i=0}^∞C_{3+i}^3x^{i+1}$
* 令$i+1=n$即可得$ans=C_{2+n}^3$

### [P2000 拯救世界](https://www.luogu.com.cn/problem/P2000)

## 指数生成函数（适用于限制元素数量，取数并排序计数）

### 形如$f(x)=\sum_{i=0}^{∞,n}a_i\frac{x^i}{i!}$，